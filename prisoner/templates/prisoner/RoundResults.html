{% extends "global/Page.html" %}
{% load otree %}

{% block title %}
    Round {{ round_number }} Results
{% endblock %}

{% block content %}

<h3>Round {{ round_number }} Results</h3>

{% if both_cooperate %}
    <table class='table table-bordered text-center'
           style='width: auto; margin: auto'>
        <tr>
            <th colspan=2 rowspan=2></th>
            <th colspan=2>The Other Participant</th>
        </tr>
        <tr>
            <th>Action 1</th>
            <th>Action 2</th>
        </tr>
        <tr>
            <th rowspan=2><span class="rotate90">You</span></th>
            <th>Action 1</th>
            <td bgcolor="#FFFF00">{{ C.BOTH_COOPERATE_PAYOFF }}, {{ C.BOTH_COOPERATE_PAYOFF }}</td>
            <td>{{ C.BETRAYED_PAYOFF }}, {{ C.BETRAY_PAYOFF }}</td>
        </tr>
        <tr>
            <th>Action 2</th>
            <td>{{ C.BETRAY_PAYOFF }}, {{ C.BETRAYED_PAYOFF }}</td>
            <td>{{ C.BOTH_DEFECT_PAYOFF }}, {{ C.BOTH_DEFECT_PAYOFF }}</td>
        </tr>
    </table>

{% elif both_defect %}
    <table class='table table-bordered text-center'
           style='width: auto; margin: auto'>
        <tr>
            <th colspan=2 rowspan=2></th>
            <th colspan=2>The Other Participant</th>
        </tr>
        <tr>
            <th>Action 1</th>
            <th>Action 2</th>
        </tr>
        <tr>
            <th rowspan=2><span class="rotate90">You</span></th>
            <th>Action 1</th>
            <td>{{ C.BOTH_COOPERATE_PAYOFF }}, {{ C.BOTH_COOPERATE_PAYOFF }}</td>
            <td>{{ C.BETRAYED_PAYOFF }}, {{ C.BETRAY_PAYOFF }}</td>
        </tr>
        <tr>
            <th>Action 2</th>
            <td>{{ C.BETRAY_PAYOFF }}, {{ C.BETRAYED_PAYOFF }}</td>
            <td bgcolor="#FFFF00">{{ C.BOTH_DEFECT_PAYOFF }}, {{ C.BOTH_DEFECT_PAYOFF }}</td>
        </tr>
    </table>

{% elif i_cooperate_he_defects %}
    <table class='table table-bordered text-center'
           style='width: auto; margin: auto'>
        <tr>
            <th colspan=2 rowspan=2></th>
            <th colspan=2>The Other Participant</th>
        </tr>
        <tr>
            <th>Action 1</th>
            <th>Action 2</th>
        </tr>
        <tr>
            <th rowspan=2><span class="rotate90">You</span></th>
            <th>Action 1</th>
            <td>{{ C.BOTH_COOPERATE_PAYOFF }}, {{ C.BOTH_COOPERATE_PAYOFF }}</td>
            <td bgcolor="#FFFF00">{{ C.BETRAYED_PAYOFF }}, {{ C.BETRAY_PAYOFF }}</td>
        </tr>
        <tr>
            <th>Action 2</th>
            <td>{{ C.BETRAY_PAYOFF }}, {{ C.BETRAYED_PAYOFF }}</td>
            <td>{{ C.BOTH_DEFECT_PAYOFF }}, {{ C.BOTH_DEFECT_PAYOFF }}</td>
        </tr>
    </table>

{% else %}
    <table class='table table-bordered text-center'
           style='width: auto; margin: auto'>
        <tr>
            <th colspan=2 rowspan=2></th>
            <th colspan=2>The Other Participant</th>
        </tr>
        <tr>
            <th>Action 1</th>
            <th>Action 2</th>
        </tr>
        <tr>
            <th rowspan=2><span class="rotate90">You</span></th>
            <th>Action 1</th>
            <td>{{ C.BOTH_COOPERATE_PAYOFF }}, {{ C.BOTH_COOPERATE_PAYOFF }}</td>
            <td>{{ C.BETRAYED_PAYOFF }}, {{ C.BETRAY_PAYOFF }}</td>
        </tr>
        <tr>
            <th>Action 2</th>
            <td bgcolor="#FFFF00">{{ C.BETRAY_PAYOFF }}, {{ C.BETRAYED_PAYOFF }}</td>
            <td>{{ C.BOTH_DEFECT_PAYOFF }}, {{ C.BOTH_DEFECT_PAYOFF }}</td>
        </tr>
    </table>

{% endif %}

<p>
    {% if same_choice %}
        Both of you chose {{ my_decision }}.
    {% else %}
        You chose {{ my_decision }} and the other participant chose {{ opponent_decision }}.
    {% endif %}
</p>

<p>
    In this round, you earned {{ round_payoff }} points.
</p>

<p>
    Your total earnings so far: {{ total_payoff }} points.
</p>

{% if game_ends %}
    <h3>Game Over</h3>

    <p>
        The experiment has ended after {{ round_number }} rounds.
    </p>

    <p>
        Your total earnings from all rounds: <strong>{{ total_payoff }} points</strong>
    </p>

    <p>
        Thank you for participating!
    </p>
{% else %}
    <p>
        The computer has determined that the game will continue to the next round.
    </p>
{% endif %}

{% next_button %}

{% endblock %}