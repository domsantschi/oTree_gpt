{{ block title }}<span style="display: none;">Personal Behavior</span>{{ endblock }}
{{ block content }}

<style>
    .bif-container {
        max-width: 900px;
        margin: 30px auto;
        padding: 25px;
        background: linear-gradient(to right, #ffffff, #f8f9fa);
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .question-box {
        border-left: 4px solid #fafcff;
        padding: 20px;
        background-color: #f8f9fa;
        margin: 20px 0;
        transition: transform 0.2s;
    }
    
    .question-box:hover {
        transform: translateX(5px);
    }
    
    .question-number {
        display: inline-block;
        width: 24px;
        height: 24px;
        background-color: #007bff;
        color: white;
        border-radius: 50%;
        text-align: center;
        line-height: 24px;
        margin-right: 10px;
        font-weight: bold;
    }

    .form-check {
        padding: 10px 0;
    }

    .form-check-input {
        transform: scale(1.2);
        margin-top: 0.3em;
    }

    .form-check-label {
        margin-left: 0.5em;
        cursor: pointer;
    }

    .progress-counter {
        background-color: #00ff559f;
        color: rgb(0, 0, 0);
        padding: 10px 15px;
        border-radius: 5px;
        margin: 15px 0;
        font-weight: bold;
        text-align: center;
    }
</style>

<div class="bif-container">
    <div class="mb-4">
        <h4>ðŸ“‹ About Your Behavior</h4>
        <p class="text-muted">Any behavior can be described in many ways. For example, one person might describe a behavior as "writing things down" while another person might describe the same behavior as "getting organized".</p>
        <p class="text-muted"><strong>Below are 10 behaviors. For each behavior, please select the description (a or b) that best describes the behavior for you.</strong></p>
    </div>

    <div class="progress-counter">
        <span id="progress-counter">0 of 10 items completed</span>
    </div>

    <form method="post">
        
        <!-- Question 1: Picking an apple -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">1</span>
                <strong>Picking an apple</strong>
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_1" value="1" id="q1a" required onclick="updateProgress()">
                <label class="form-check-label" for="q1a">a. Getting something to eat</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_1" value="0" id="q1b" onclick="updateProgress()">
                <label class="form-check-label" for="q1b">b. Pulling an apple off a branch</label>
            </div>
        </div>

        <!-- Question 2: Painting a room -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">2</span>
                <strong>Painting a room</strong>
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_2" value="0" id="q2a" required onclick="updateProgress()">
                <label class="form-check-label" for="q2a">a. Applying brush strokes</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_2" value="1" id="q2b" onclick="updateProgress()">
                <label class="form-check-label" for="q2b">b. Making the room look fresh</label>
            </div>
        </div>

        <!-- Question 3: Locking a door -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">3</span>
                <strong>Locking a door</strong>
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_3" value="0" id="q3a" required onclick="updateProgress()">
                <label class="form-check-label" for="q3a">a. Putting a key in the lock</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_3" value="1" id="q3b" onclick="updateProgress()">
                <label class="form-check-label" for="q3b">b. Securing the house</label>
            </div>
        </div>

        <!-- Question 4: Voting -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">4</span>
                <strong>Voting</strong>
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_4" value="1" id="q4a" required onclick="updateProgress()">
                <label class="form-check-label" for="q4a">a. Influencing the election</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_4" value="0" id="q4b" onclick="updateProgress()">
                <label class="form-check-label" for="q4b">b. Marking a ballot</label>
            </div>
        </div>

        <!-- Question 5: Filling out a personality test -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">5</span>
                <strong>Filling out a personality test</strong>
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_5" value="0" id="q5a" required onclick="updateProgress()">
                <label class="form-check-label" for="q5a">a. Answering questions</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_5" value="1" id="q5b" onclick="updateProgress()">
                <label class="form-check-label" for="q5b">b. Revealing what you're like</label>
            </div>
        </div>

        <!-- Question 6: Greeting someone -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">6</span>
                <strong>Greeting someone</strong>
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_6" value="0" id="q6a" required onclick="updateProgress()">
                <label class="form-check-label" for="q6a">a. Saying hello</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_6" value="1" id="q6b" onclick="updateProgress()">
                <label class="form-check-label" for="q6b">b. Showing friendliness</label>
            </div>
        </div>

        <!-- Question 7: Taking a test -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">7</span>
                <strong>Taking a test</strong>
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_7" value="1" id="q7a" required onclick="updateProgress()">
                <label class="form-check-label" for="q7a">a. Showing one's knowledge</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_7" value="0" id="q7b" onclick="updateProgress()">
                <label class="form-check-label" for="q7b">b. Answering questions</label>
            </div>
        </div>

        <!-- Question 8: Resisting temptation -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">8</span>
                <strong>Resisting temptation</strong>
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_8" value="0" id="q8a" required onclick="updateProgress()">
                <label class="form-check-label" for="q8a">a. Saying "no"</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_8" value="1" id="q8b" onclick="updateProgress()">
                <label class="form-check-label" for="q8b">b. Showing moral courage</label>
            </div>
        </div>

        <!-- Question 9: Traveling by car -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">9</span>
                <strong>Traveling by car</strong>
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_9" value="0" id="q9a" required onclick="updateProgress()">
                <label class="form-check-label" for="q9a">a. Following a map</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_9" value="1" id="q9b" onclick="updateProgress()">
                <label class="form-check-label" for="q9b">b. Seeing countryside</label>
            </div>
        </div>

        <!-- Question 10: Talking to a child -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">10</span>
                <strong>Talking to a child</strong>
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_10" value="1" id="q10a" required onclick="updateProgress()">
                <label class="form-check-label" for="q10a">a. Teaching a child something</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="bif_10" value="0" id="q10b" onclick="updateProgress()">
                <label class="form-check-label" for="q10b">b. Using simple words</label>
            </div>
        </div>

        <!-- Hidden fields to store calculated score and responses -->
        <input type="hidden" name="bif_score" id="bif_score" value="0">
        <input type="hidden" name="bif_responses" id="bif_responses" value="{}">
        
        <div class="text-center mt-4">
            {{ next_button }}
        </div>
    </form>
</div>

<script>
function updateProgress() {
    let completed = 0;
    for (let i = 1; i <= 10; i++) {
        const selected = document.querySelector('input[name="bif_' + i + '"]:checked');
        if (selected) {
            completed++;
        }
    }
    document.getElementById('progress-counter').textContent = completed + ' of 10 items completed';
}

// Calculate BIF score before form submission
document.querySelector('form').addEventListener('submit', function() {
    let score = 0;
    let responses = {};
    
    for (let i = 1; i <= 10; i++) {
        const selected = document.querySelector('input[name="bif_' + i + '"]:checked');
        if (selected) {
            const value = parseInt(selected.value);
            score += value;
            responses[i] = value;
        }
    }
    
    document.getElementById('bif_score').value = score;
    document.getElementById('bif_responses').value = JSON.stringify(responses);
});
</script>

{% endblock %}
