{{ block title }}<span style="display: none;">Study Feedback</span>{{ endblock }}
{{ block content }}

<style>
    .controls-container {
        max-width: 900px;
        margin: 30px auto;
        padding: 25px;
        background: linear-gradient(to right, #ffffff, #f8f9fa);
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .section-box {
        border-left: 4px solid #007bff;
        padding: 20px;
        background-color: #f8f9fa;
        margin: 20px 0;
        transition: transform 0.2s;
        border-radius: 5px;
    }
    
    .section-box:hover {
        transform: translateX(5px);
    }

    .question-box {
        border-left: 4px solid #007bff;
        padding: 20px;
        background-color: #f8f9fa;
        margin: 20px 0;
        transition: transform 0.2s;
        border-radius: 5px;
    }
    
    .question-box:hover {
        transform: translateX(5px);
    }
    
    .question-number {
        display: inline-block;
        width: 24px;
        height: 24px;
        background-color: #007bff;
        color: white;
        border-radius: 50%;
        text-align: center;
        line-height: 24px;
        margin-right: 10px;
        font-weight: bold;
    }

    .likert-scale {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 10px;
        margin: 20px 0;
        padding: 15px;
        background-color: white;
        border-radius: 5px;
    }

    .scale-option {
        text-align: center;
        padding: 10px 5px;
        transition: all 0.2s;
        border-radius: 5px;
    }

    .scale-option:hover {
        background-color: rgba(0, 123, 255, 0.05);
    }

    .radio-label {
        font-size: 0.85em;
        margin-top: 8px;
        display: block;
        color: #495057;
    }

    input[type="radio"] {
        transform: scale(1.2);
        margin-bottom: 8px;
    }

    input[type="radio"]:checked + .radio-label {
        color: #007bff;
        font-weight: bold;
    }
</style>

<div class="controls-container">
    <div class="mb-4">
        <h4>Study Feedback</h4>
        <p class="text-muted">The following questions ask about your experience completing the risk identification task. Please reflect on the task you just completed and answer the questions below.</p>
    </div>
    
    <form method="post">

        <!-- Question 1: Manipulation Effort -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">1</span>
                <b>How much effort</b> did it take to complete the risk identification task?
            </p>
            <div class="likert-scale">
                {% for i in range(1, 8) %}
                    <div class="scale-option">
                        <input type="radio" name="manipulation_effort" value="{{ i }}" id="q3_{{ i }}" required>
                        <label class="radio-label" for="q3_{{ i }}">
                            {% if i == 1 %}Extremely<br>low effort{% endif %}
                            {% if i == 2 %}Low<br>effort{% endif %}
                            {% if i == 3 %}Rather low<br>effort{% endif %}
                            {% if i == 4 %}Neutral<br>effort{% endif %}
                            {% if i == 5 %}Rather high<br>effort{% endif %}
                            {% if i == 6 %}High<br>effort{% endif %}
                            {% if i == 7 %}Extremely<br>high effort{% endif %}
                        </label>
                    </div>
                {% endfor %}
            </div>
            {{ formfield_errors 'manipulation_effort' }}
        </div>

        <!-- Question 2: Manipulation Difficulty -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">2</span>
                <b>How difficult</b> was it to complete the risk identification task?
            </p>
            <div class="likert-scale">
                {% for i in range(1, 8) %}
                    <div class="scale-option">
                        <input type="radio" name="manipulation_difficulty" value="{{ i }}" id="q4_{{ i }}" required>
                        <label class="radio-label" for="q4_{{ i }}">
                            {% if i == 1 %}Extremely<br>easy{% endif %}
                            {% if i == 2 %}Easy<br>{% endif %}
                            {% if i == 3 %}Rather<br>easy{% endif %}
                            {% if i == 4 %}Neutral<br>{% endif %}
                            {% if i == 5 %}Rather<br>difficult{% endif %}
                            {% if i == 6 %}Difficult<br>{% endif %}
                            {% if i == 7 %}Extremely<br>difficult{% endif %}
                        </label>
                    </div>
                {% endfor %}
            </div>
            {{ formfield_errors 'manipulation_difficulty' }}
        </div>
        
        <!-- Question 3: Attention Check -->
        <div class="question-box">
            <p class="mb-3">
                <span class="question-number">3</span>
                If you are reading this question carefully, please <b>select "Agree"</b>.
            </p>
            <div class="likert-scale">
                <div class="scale-option">
                    <input type="radio" name="attention_check" value="1" id="attn_1" required>
                    <label class="radio-label" for="attn_1">Strongly<br>disagree</label>
                </div>
                <div class="scale-option">
                    <input type="radio" name="attention_check" value="2" id="attn_2">
                    <label class="radio-label" for="attn_2">Disagree<br>&nbsp;</label>
                </div>
                <div class="scale-option">
                    <input type="radio" name="attention_check" value="3" id="attn_3">
                    <label class="radio-label" for="attn_3">Somewhat<br>disagree</label>
                </div>
                <div class="scale-option">
                    <input type="radio" name="attention_check" value="4" id="attn_4">
                    <label class="radio-label" for="attn_4">Neutral<br>&nbsp;</label>
                </div>
                <div class="scale-option">
                    <input type="radio" name="attention_check" value="5" id="attn_5">
                    <label class="radio-label" for="attn_5">Somewhat<br>agree</label>
                </div>
                <div class="scale-option">
                    <input type="radio" name="attention_check" value="6" id="attn_6">
                    <label class="radio-label" for="attn_6">Agree<br>&nbsp;</label>
                </div>
                <div class="scale-option">
                    <input type="radio" name="attention_check" value="7" id="attn_7">
                    <label class="radio-label" for="attn_7">Strongly<br>agree</label>
                </div>
            </div>
            {{ formfield_errors 'attention_check' }}
        </div>
        
        <div class="text-center mt-4">
            {{ next_button }}
        </div>
    </form>
</div>

{% endblock %}
